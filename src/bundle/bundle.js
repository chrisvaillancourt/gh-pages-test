require(["esri/Map","esri/views/MapView","esri/layers/VectorTileLayer","esri/Basemap","esri/layers/FeatureLayer","esri/widgets/Legend","esri/widgets/Home","esri/widgets/Expand","esri/widgets/Search"],(function(e,a,l,t,i,r,o,s,n){var p=new l({url:"https://www.arcgis.com/sharing/rest/content/items/2afe5b807fa74006be6363fd243ffb30/resources/styles/root.json"}),u=new l({url:"https://www.arcgis.com/sharing/rest/content/items/ba52238d338745b1a355407ec9df6768/resources/styles/root.json",opacity:.7}),_=new t({baseLayers:[p,new l({url:"https://www.arcgis.com/sharing/rest/content/items/97fa1365da1e43eabb90d0364326bc2d/resources/styles/root.json",opacity:.35})],referenceLayers:[u]}),d={type:"simple",symbol:{type:"simple-fill",outline:{color:[145,145,145,.15],width:"0.5px"}},label:"Census Tract",visualVariables:[{type:"color",field:"Covid_19_Vulnerability_Index",legendOptions:{title:"COVID-19 Vulnerability Index"},stops:[{value:"24",color:"#411b6d",label:"24 (low)"},{value:"43",color:"#fffee6",label:"43 (avg)"},{value:"62",color:"#990b0b",label:"62 (high)"}]}]},c={type:"simple",symbol:{type:"simple-marker",outline:{color:[255,255,255,.25],width:"0.5px"}},label:"City",visualVariables:[{type:"color",field:"USER_Covid_19_Vulnerability_Ind",legendOptions:{title:"COVID-19 Vulnerability Index"},stops:[{value:"31",color:"#411b6d",label:"31 (low)"},{value:"42.5",color:"#fffee6",label:"43 (avg)"},{value:"54",color:"#990b0b",label:"54 (high)"}]},{type:"size",field:"USER_Total_Population",minDataValue:42513,maxDataValue:1e6,minSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:8},{value:4622324,size:8},{value:9244648,size:6},{value:18489297,size:4}]},maxSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:80},{value:4622324,size:70},{value:9244648,size:60},{value:18489297,size:40}]}}]},m={type:"simple",symbol:{type:"simple-fill",outline:{color:[145,145,145,.15],width:"0.5px"}},label:"Census Tract",visualVariables:[{type:"color",field:"Health_Infrastructure",stops:[{value:"30",color:"#411b6d",label:"30 (low)"},{value:"50",color:"#fffee6",label:"50 (avg)"},{value:"71",color:"#990b0b",label:"71 (high)"}]}]},f={type:"simple",symbol:{type:"simple-marker",outline:{color:[255,255,255,.25],width:"0.5px"}},label:"City",visualVariables:[{type:"color",field:"USER_Health_Infrastruture_Vulne",stops:[{value:"37",color:"#411b6d",label:"37 (low)"},{value:"54.9",color:"#fffee6",label:"55 (avg)"},{value:"73",color:"#990b0b",label:"73 (high)"}]},{type:"size",field:"USER_Total_Population",minDataValue:42513,maxDataValue:1e6,minSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:8},{value:4622324,size:8},{value:9244648,size:6},{value:18489297,size:4}]},maxSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:80},{value:4622324,size:70},{value:9244648,size:60},{value:18489297,size:40}]}}]},g={type:"simple",symbol:{type:"simple-fill",outline:{color:[145,145,145,.15],width:"0.5px"}},label:"Census Tract",visualVariables:[{type:"color",field:"Population_Demographics",stops:[{value:"12",color:"#411b6d",label:"12 (low)"},{value:"30.5",color:"#fffee6",label:"30.5 (avg)"},{value:"48",color:"#990b0b",label:"48 (high)"}]}]},v={type:"simple",symbol:{type:"simple-marker",outline:{color:[255,255,255,.25],width:"0.5px"}},label:"City",visualVariables:[{type:"color",field:"USER_Population_Demographics_Vu",stops:[{value:"23",color:"#411b6d",label:"23 (low)"},{value:"31.2",color:"#fffee6",label:"31 (avg)"},{value:"39",color:"#990b0b",label:"39 (high)"}]},{type:"size",field:"USER_Total_Population",minDataValue:42513,maxDataValue:1e6,minSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:8},{value:4622324,size:8},{value:9244648,size:6},{value:18489297,size:4}]},maxSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:80},{value:4622324,size:70},{value:9244648,size:60},{value:18489297,size:40}]}}]},h={type:"simple",symbol:{type:"simple-fill",outline:{color:[145,145,145,.15],width:"0.5px"}},label:"Census Tract",visualVariables:[{type:"color",field:"Underlying_Health_Issues",stops:[{value:"22",color:"#411b6d",label:"22 (low)"},{value:"41.5",color:"#fffee6",label:"41.5 (avg)"},{value:"61",color:"#990b0b",label:"61 (high)"}]}]},b={type:"simple",symbol:{type:"simple-marker",outline:{color:[255,255,255,.25],width:"0.5px"}},label:"City",visualVariables:[{type:"color",field:"USER_Underlying_Health_Vulnerab",stops:[{value:"28",color:"#411b6d",label:"28 (low)"},{value:"40.2",color:"#fffee6",label:"40 (avg)"},{value:"52",color:"#990b0b",label:"52 (high)"}]},{type:"size",field:"USER_Total_Population",minDataValue:42513,maxDataValue:1e6,minSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:8},{value:4622324,size:8},{value:9244648,size:6},{value:18489297,size:4}]},maxSize:{type:"size",valueExpression:"$view.scale",stops:[{value:2311162,size:80},{value:4622324,size:70},{value:9244648,size:60},{value:18489297,size:40}]}}]},y={title:"{name}: Tract {FIPS_text}",content:"\n      <p>The COVID-19 vulnerability index for this area is <strong>{Covid_19_Vulnerability_Index}</strong>.</p>\n      <p>Indicators impacting this value include:</p>\n      <ul>\n        <li>Population Demographics Index: <strong>{Population_Demographics}</strong></li>\n        <li>Underlying Health Issues Index: <strong>{Underlying_Health_Issues}</strong></li>\n        <li>Health infrastructure Index: <strong>{Health_Infrastructure}</strong></li>\n      </ul>\n      ",fieldInfos:[{fieldName:"Covid_19_Vulnerability_Index",format:{places:0}},{fieldName:"Population_Demographics",format:{places:0}},{fieldName:"Underlying_Health_Issues",format:{places:0}},{fieldName:"Health_Infrastructure",format:{places:0}}]},w={title:"{Match_addr}",content:"\n      <p>The aggregate COVID-19 vulnerability index for this city's {USER_Total_Population} residents is <strong>{USER_Covid_19_Vulnerability_Ind}</strong>.</p>\n      <p>Other aggregate indicators impacting this value include:</p>\n      <ul>\n        <li>Population Demographics Index: <strong>{USER_Population_Demographics_Vu}</strong></li>\n        <li>Underlying Health Issues Index: <strong>{USER_Underlying_Health_Vulnerab}</strong></li>\n        <li>Health infrastructure Index: <strong>{USER_Health_Infrastruture_Vulne}</strong></li>\n      </ul>\n      ",fieldInfos:[{fieldName:"USER_Covid_19_Vulnerability_Ind",format:{places:0}},{fieldName:"USER_Population_Demographics_Vu",format:{places:0}},{fieldName:"USER_Underlying_Health_Vulnerab",format:{places:0}},{fieldName:"USER_Health_Infrastruture_Vulne",format:{places:0}},{fieldName:"USER_Total_Population",format:{places:0,digitSeparator:!0}}]},I={title:"{name}: Tract {FIPS_text}",content:"\n      <p>The health infrastructure vulnerability index for this area is <strong>{Health_Infrastructure}</strong>.</p>\n      <p>Indicators impacting this value include:</p>\n      <ul>\n        <li>Pop. 18-64 with no health insurance: <strong>{Percentage_of_pop__18_64_with_n}%</strong></li>\n        <li>Hospital beds per 1,000 pop. within 25km radius: <strong>{Number_of_hospital_beds_per_1_0}</strong></li>\n        <li>Urgent care facilities per 1,000 pop. within 25km radius: <strong>{Number_of_urgent_care_facilitie}</strong></li>\n        <li>Ratio of the population to primary care physicians: <strong>{Ratio_of_the_population_to_prim}</strong></li>\n      </ul>\n      ",fieldInfos:[{fieldName:"Health_Infrastructure",format:{places:0}},{fieldName:"Percentage_of_pop__18_64_with_n",format:{places:0}},{fieldName:"Number_of_hospital_beds_per_1_0",format:{places:0}},{fieldName:"Number_of_urgent_care_facilitie",format:{places:0}},{fieldName:"Ratio_of_the_population_to_prim",format:{places:0}}]},x={title:"{Match_addr}",content:"\n      <p>The health infrastructure vulnerability index for this this city's {USER_Total_Population} residents is <strong>{USER_Health_Infrastruture_Vulne}</strong>.</p>\n      ",fieldInfos:[{fieldName:"USER_Health_Infrastruture_Vulne",format:{places:0}},{fieldName:"USER_Total_Population",format:{places:0,digitSeparator:!0}}]},S={title:"{name}: Tract {FIPS_text}",content:"\n      <p>The population demographics vulnerability index for this area is <strong>{Population_Demographics}</strong>.</p>\n      <p>Indicators impacting this value include:</p>\n      <ul>\n        <li>Population aged 80+: <strong>{Population_aged_80___percentage}%</strong></li>\n        <li>Population aged 70-79: <strong>{Population_aged_70_79__percenta}%</strong></li>\n        <li>Population aged 60-69: <strong>{pop_aged_60_69_p}%</strong></li>\n        <li>Population density per 10,000: <strong>{Population_density_per_10_000}</strong></li>\n        <li>Nursing home population per 1,000: <strong>{Nursing_home_population_per_1_0}</strong></li>\n        <li>Prison population per 1,000: <strong>{Prison_population_per_1_000}</strong></li>\n      </ul>\n      ",fieldInfos:[{fieldName:"Population_Demographics",format:{places:0}},{fieldName:"Population_aged_80___percentage",format:{places:0}},{fieldName:"Population_aged_70_79__percenta",format:{places:0}},{fieldName:"pop_aged_60_69_p",format:{places:0}},{fieldName:"Population_density_per_10_000",format:{places:0}},{fieldName:"Nursing_home_population_per_1_0",format:{places:0}},{fieldName:"Prison_population_per_1_000",format:{places:0}}]},z={title:"{Match_addr}",content:"\n      <p>The population demographics vulnerability index for this this city's {USER_Total_Population} residents is <strong>{USER_Population_Demographics_Vu}</strong>.</p>\n      ",fieldInfos:[{fieldName:"USER_Population_Demographics_Vu",format:{places:0}},{fieldName:"USER_Total_Population",format:{places:0,digitSeparator:!0}}]},E={title:"{name}: Tract {FIPS_text}",content:"<p>The underlying health issues vulnerability index for this area is <strong>{Underlying_Health_Issues}</strong>.</p>\n      <p>Indicators impacting this value include:</p>\n      <ul>\n        <li>Adult high blood pressure prevalence: <strong>{High_blood_pressure_prevalence_}</strong></li>\n        <li>Adult cancer prevalence: <strong>{Cancer_prevalence_in_adults_18_}</strong></li>\n        <li>Adult asthma prevalence: <strong>{Asthma_prevalence_among_adults_}</strong></li>\n        <li>Adult coronary heart disease prevalence: <strong>{Coronary_heart_disease_prevalen}</strong></li>\n        <li>Adult COPD prevalence: <strong>{COPD_prevalence_among_adults_18}</strong></li>\n        <li>Adult active smoking: <strong>{Active_smoking_in_adults_18_}</strong></li>\n        <li>Adult diabetes prevalence: <strong>{Diabetes_prevalence_in_adults_1}</strong></li>\n      </ul>",fieldInfos:[{fieldName:"Underlying_Health_Issues",format:{places:0}},{fieldName:"High_blood_pressure_prevalence_",format:{places:0}},{fieldName:"Cancer_prevalence_in_adults_18_",format:{places:0}},{fieldName:"Asthma_prevalence_among_adults_",format:{places:0}},{fieldName:"Coronary_heart_disease_prevalen",format:{places:0}},{fieldName:"COPD_prevalence_among_adults_18",format:{places:0}},{fieldName:"Active_smoking_in_adults_18_",format:{places:0}},{fieldName:"Diabetes_prevalence_in_adults_1",format:{places:0}}]},P={title:"{Match_addr}",content:"\n      <p>The underlying health issues vulnerability index for this this city's {USER_Total_Population} residents is <strong>{USER_Underlying_Health_Vulnerab}</strong>.</p>\n      ",fieldInfos:[{fieldName:"USER_Underlying_Health_Vulnerab",format:{places:0}},{fieldName:"USER_Total_Population",format:{places:0,digitSeparator:!0}}]},V=new i({url:"https://services7.arcgis.com/Fnhc04BJL93uqCjd/ArcGIS/rest/services/covid_vulnerability_v3/FeatureServer/0",renderer:d,popupEnabled:!0,popupTemplate:y,title:"Census Tract",maxScale:0,minScale:1161488}),U=new i({url:"https://services7.arcgis.com/Fnhc04BJL93uqCjd/ArcGIS/rest/services/covid_19_vulnerability_index_city_aggregate_v1/FeatureServer/0",renderer:c,popupEnabled:!0,popupTemplate:w,title:"City",maxScale:2261586,minScale:0}),N=new a({container:"viewDiv",map:new e({basemap:_,layers:[U,V]}),center:[-99.74405,38.1374],zoom:3});N.when((function(){var e,a,l,t=new o({view:N}),i=new r({view:N,container:document.createElement("div")}),p=new s({view:N,content:i,expanded:!0,expandIconClass:"esri-icon-key"}),u=new n({view:N}),_=(e=[{id:"covid-index",label:"COVID-19 Vulnerability Index",value:"covid"},{id:"health-infrastructure",label:"Health Infrastructure Index",value:"infrastructure"},{id:"population-demographics",label:"Population Demographics Index",value:"demographics"},{id:"health-issues",label:"Underlying Health Issues Index",value:"issues"}],a=document.createDocumentFragment(),(l=document.createElement("p")).textContent="Select Map Category",l.classList.add("p"),a.appendChild(l),e.forEach((function(e){var l=e.id,t=e.label,i=e.value,r=document.createElement("div"),o=document.createElement("label"),s=document.createElement("input");o.classList.add("label"),o.setAttribute("for",l),o.textContent=t,s.setAttribute("type","radio"),s.setAttribute("name","options"),s.setAttribute("id",l),s.setAttribute("value",i),"covid"==i&&s.setAttribute("checked",""),r.appendChild(s),r.appendChild(o),a.appendChild(r)})),a),d=document.createElement("div");d.classList.add("esri-widget","option"),d.appendChild(_),N.ui.add(d,"top-right"),N.ui.add([t,p],"top-left"),N.ui.add(u,"bottom-right")})),document.addEventListener("change",(function(e){if("options"==e.target.name)switch(e.target.value){case"covid":V.renderer=d,U.renderer=c,V.popupTemplate=y,U.popupTemplate=w;break;case"infrastructure":V.renderer=m,U.renderer=f,V.popupTemplate=I,U.popupTemplate=x;break;case"demographics":V.renderer=g,U.renderer=v,V.popupTemplate=S,U.popupTemplate=z;break;case"issues":V.renderer=h,U.renderer=b,V.popupTemplate=E,U.popupTemplate=P;break;default:V.renderer=d,U.renderer=c,V.popupTemplate=y,U.popupTemplate=w}}),!1)}));
